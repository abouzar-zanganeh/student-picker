<!DOCTYPE html>
<html lang="fa" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>دستیار هوشمند معلم</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <header class="app-header">
        <h1>📚 دستیار هوشمند معلم</h1>
    </header>

    <main id="class-management-page" class="page active">
        <h2>لیست کلاس‌ها</h2>
        <div class="input-group">
            <input type="text" id="new-class-name" placeholder="نام کلاس جدید...">
            <button id="add-class-btn">افزودن</button>
        </div>
        <ul id="class-list" class="list-container"></ul>
    </main>

    <main id="student-page" class="page">
        <h2 id="class-name-header"></h2>
        <button id="back-to-sessions-btn">➡️ بازگشت به لیست جلسات</button>
        <hr class="separator">
        <h3>🎲 انتخابگر هوشمند</h3>
        <div id="category-selection-container" class="category-container">
        </div>
        <div id="select-student-btn-wrapper">
            <button id="select-student-btn" class="btn-success btn-large">انتخاب نفر بعدی!</button>
        </div>
        <div id="selected-student-result" class="result-display"></div>
        <h3 class="section-title">آمار عملکرد دانش‌آموزان</h3>
        <ul id="student-list" class="list-container"></ul>
    </main>

    <main id="settings-page" class="page">
        <h2 id="settings-class-name-header"></h2>
        <button class="back-to-classes-btn">➡️ بازگشت به لیست کلاس‌ها</button>
        <hr class="separator">

        <h3 id="student-management-toggle" class="accordion-toggle open">
            <span class="arrow">▼</span>
            مدیریت لیست دانش‌آموزان
        </h3>
        <div id="student-management-content" class="accordion-content open">
            <div class="input-group">
                <input type="text" id="new-student-name" placeholder="افزودن دستی دانش‌آموز...">
                <button id="add-student-btn">افزودن</button>
            </div>
            <div>
                <textarea id="paste-area"
                    placeholder="لیست اسامی کپی شده را اینجا Paste کنید... (هر اسم در یک خط)"></textarea>
                <button id="process-paste-btn" class="btn-secondary">بررسی لیست</button>
            </div>
            <div class="divider-text">یا</div>
            <div>
                <input type="file" id="csv-file-input" class="hidden-input" accept=".csv">
                <button id="import-csv-btn" class="btn-secondary">ورود لیست از فایل (CSV)</button>
            </div>
        </div>

        <h3 class="section-title">مدیریت دسته‌بندی‌های پرسش</h3>
        <div class="input-group">
            <input type="text" id="new-category-name" placeholder="نام دسته‌بندی جدید (مثلا: Grammar)">
            <button id="add-category-btn">افزودن</button>
        </div>
        <ul id="category-list" class="list-container"></ul>

        <h3 class="section-title">لیست فعلی دانش‌آموزان</h3>
        <ul id="settings-student-list" class="list-container"></ul>
    </main>

    <main id="session-page" class="page">
        <h2 id="session-class-name-header"></h2>
        <button class="back-to-classes-btn">➡️ بازگشت به لیست کلاس‌ها</button>
        <hr class="separator">
        <h3>انتخاب جلسه</h3>
        <div class="session-actions">
            <button id="new-session-btn" class="btn-success btn-large">
                ➕ شروع جلسه جدید
            </button>
        </div>
        <h4>جلسات قبلی:</h4>
        <ul id="session-list" class="list-container"></ul>
    </main>

    <main id="column-mapping-page" class="page">
        <h2>انتخاب ستون نام دانش‌آموزان</h2>
        <p>فایل شما با موفقیت خوانده شد. لطفاً از لیست زیر، ستونی که حاوی نام کامل دانش‌آموزان است را انتخاب کنید.</p>

        <div class="input-group">
            <select id="column-select-dropdown" style="width: 100%; padding: 10px;"></select>
        </div>

        <div class="form-actions">
            <button id="confirm-column-btn" class="btn-success">ادامه و نمایش پیش‌نمایش</button>
            <button id="cancel-import-btn" class="btn-secondary" style="width: auto;">لغو عملیات</button>
        </div>
    </main>

    <main id="csv-preview-page" class="page">
        <h2>پیش‌نمایش لیست ورودی</h2>
        <p>لطفاً لیست زیر را بررسی کرده و موارد مورد نظر برای افزودن را تایید کنید.</p>
        <ul id="csv-preview-list" class="list-container"></ul>
        <div class="form-actions">
            <button id="csv-confirm-btn" class="btn-success">تایید و افزودن موارد انتخاب شده</button>
            <button id="csv-cancel-btn">لغو عملیات</button>
        </div>
    </main>

    <div id="undo-toast" class="undo-toast">
        <span id="undo-message"></span>
        <button id="undo-btn">واگرد</button>
    </div>

    <div id="notification-toast" class="notification-toast"></div>

    <script src="script.js"></script>
</body>

</html>