<!DOCTYPE html>
<html lang="fa" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุฏุณุชุงุฑ ููุดููุฏ ูุนูู</title>
    <meta name="theme-color" content="#007bff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="ุฏุณุชุงุฑ ูุนูู">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <link rel="icon" href="images/icon-192.png" type="image/png">
    <link rel="stylesheet" href="/src/style.css">
</head>

<body>

    <div id="demo-mode-banner" class="demo-banner">
        <span>๐ญ ุญุงูุช ููุงุด (Demo) ูุนุงู ุงุณุช. ูฺ ุชุบุฑ ุฐุฎุฑู ูุฎูุงูุฏ ุดุฏ.</span>
        <button id="exit-demo-btn">ุฎุฑูุฌ</button>
    </div>

    <header class="app-header">
        <button id="hamburger-menu-btn" class="btn-icon">โฐ</button>
        <h1>๐ ุฏุณุชุงุฑ ููุดููุฏ ูุนูู</h1>
        <div class="header-placeholder"></div> <!-- To balance the flexbox -->
    </header>
    <div id="page-header-bar" class="page-header-bar">
        <!-- This header bar is only used for the sessions page -->
        <div id="breadcrumb-container" class="breadcrumb-container"></div>
        <button id="header-settings-btn" class="btn-icon">โ๏ธ</button>
    </div>

    <div id="side-nav-menu" class="side-nav">
        <a href="javascript:void(0)" id="close-nav-btn" class="close-btn">&times;</a>

        <button id="app-settings-nav-btn" class="nav-btn">โ๏ธ ุชูุธูุงุช ุจุฑูุงูู</button>

        <hr class="nav-separator">
        <button id="trash-nav-btn" class="nav-btn">๐๏ธ ุณุทู ุฒุจุงูู</button>
        <button id="demo-mode-btn" class="nav-btn">๐ญ ุญุงูุช ููุงุด (Demo)</button>
        <button id="backup-data-btn" class="nav-btn">๐ค ูพุดุชุจุงูโฺฏุฑ</button>
        <button id="restore-data-btn" class="nav-btn">๐ฅ ุจุงุฒุงุจ</button>
        <button id="restore-points-nav-btn" class="nav-btn">โบ ููุงุท ุจุงุฒฺฏุดุช</button>
        <input type="file" id="restore-file-input" class="hidden-input" accept=".json,.txt">
    </div>

    <div id="app-settings-modal" class="modal-overlay">
        <div class="modal-content">
            <h3>ุชูุธูุงุช ุจุฑูุงูู</h3>
            <ul class="list-container">
                <li>
                    <span>๐ ุงูฺฉุช ุตูุช (ุงูุชุฎุงุจ)</span>
                    <label class="checkbox-label">
                        <input type="checkbox" id="setting-sound-toggle">
                    </label>
                </li>
                <li>
                    <span>๐ณ ูุฑุฒุด (ูุจุฑู)</span>
                    <label class="checkbox-label">
                        <input type="checkbox" id="setting-vibration-toggle">
                    </label>
                </li>
                <li>
                    <span>๐ค ูุญุงูุธ ุตูุญู (Screen Saver)</span>
                    <label class="checkbox-label">
                        <input type="checkbox" id="setting-screensaver-toggle">
                    </label>
                </li>
            </ul>
            <div class="modal-actions">
                <button id="close-settings-btn" class="btn-secondary">ุจุณุชู</button>
            </div>
        </div>
    </div>

    <div id="overlay" class="overlay modal-overlay"></div>

    <main id="class-management-page" class="page active">
        <h2>ูุณุช ฺฉูุงุณโูุง</h2>
        <div id="class-management-stats" class="class-stats-summary"></div>
        <div class="global-search-container">
            <div class="student-search-container animated-search-container">
                <input type="text" id="global-student-search-input" class="animated-search-input"
                    placeholder="ุฌุณุชโุฌู ุฏุงูุดโุขููุฒ...">
                <span class=" search-icon">๐</span>
                <div id="global-student-search-results" class="search-results-dropdown"></div>
            </div>
        </div>
        <div class="input-group">
            <div class="composite-input">
                <input type="text" id="new-class-name" placeholder="ูุงู ฺฉูุงุณ ุฌุฏุฏ...">
                <div class="class-type-selection">
                    <label>
                        <input type="radio" name="class-type" value="in-person">
                        <span>ุญุถูุฑ</span>
                    </label>
                    <label>
                        <input type="radio" name="class-type" value="online">
                        <span>ุขููุงู</span>
                    </label>
                </div>
            </div>
            <button id="add-class-btn">ุงูุฒูุฏู</button>
        </div>
        <ul id="class-list" class="list-container"></ul>
        <p id="app-version" style="text-align: center; font-size: 12px; color: #888; margin-top: 20px;"></p>
    </main>

    <main id="settings-page" class="page">
        <h2 id="settings-class-name-header"></h2>

        <h3 id="student-management-toggle" class="accordion-toggle open">
            <span class="arrow">โผ</span>
            ูุฏุฑุช ูุณุช ุฏุงูุดโุขููุฒุงู
        </h3>
        <div id="student-management-content" class="accordion-content open">
            <div class="input-group">
                <input type="text" id="new-student-name" placeholder="ุงูุฒูุฏู ุฏุณุช ุฏุงูุดโุขููุฒ...">
                <button id="add-student-btn">ุงูุฒูุฏู</button>
            </div>
            <div>
                <textarea id="paste-area"
                    placeholder="ูุณุช ุงุณุงู ฺฉูพ ุดุฏู ุฑุง ุงูุฌุง Paste ฺฉูุฏ... (ูุฑ ุงุณู ุฏุฑ ฺฉ ุฎุท)"></textarea>
                <button id="process-paste-btn" class="btn-secondary">ุจุฑุฑุณ ูุณุช</button>
            </div>
            <div class="divider-text">ุง</div>
            <div>
                <input type="file" id="csv-file-input" class="hidden-input" accept=".csv">
                <button id="import-csv-btn" class="btn-secondary">ูุฑูุฏ ูุณุช ุงุฒ ูุงู (CSV)</button>
            </div>
        </div>

        <h3 class="section-title">ูุฏุฑุช ุฏุณุชูโุจูุฏโูุง ูพุฑุณุด</h3>
        <div class="input-group">
            <div class="input-wrapper">
                <input type="text" id="new-category-name" placeholder="ูุงู ุฏุณุชูโุจูุฏ ุฌุฏุฏ (ูุซูุง: Grammar)">
            </div>
            <div class="category-options">
                <input type="checkbox" id="is-graded-checkbox">
                <label for="is-graded-checkbox">ููุฑูโุฏุงุฑ</label>
            </div>
            <button id="add-category-btn">ุงูุฒูุฏู</button>
        </div>
        <ul id="category-list" class="list-container"></ul>

        <h3 class="section-title">ุชูุธูุงุช ุฏฺฏุฑ</h3>
        <ul class="list-container">
            <li>
                <span>ููุน ฺฉูุงุณ</span>
                <div class="class-type-selection no-border">
                    <label>
                        <input type="radio" name="class-type-setting" value="in-person">
                        <span>ุญุถูุฑ</span>
                    </label>
                    <label>
                        <input type="radio" name="class-type-setting" value="online">
                        <span>ุขููุงู</span>
                    </label>
                </div>
            </li>
        </ul>

        <h3 class="section-title">ุฒูุงูโุจูุฏ ฺฉูุงุณ</h3>
        <ul class="list-container">
            <li>
                <div style="display: flex; flex-direction: column; width: 100%; gap: 15px;">
                    <div style="display: flex; flex-wrap: wrap; gap: 10px; justify-content: center;">
                        <label><input type="checkbox" name="schedule-day" value="6"> ุดูุจู</label>
                        <label><input type="checkbox" name="schedule-day" value="0"> ฑุดูุจู</label>
                        <label><input type="checkbox" name="schedule-day" value="1"> ฒุดูุจู</label>
                        <label><input type="checkbox" name="schedule-day" value="2"> ณุดูุจู</label>
                        <label><input type="checkbox" name="schedule-day" value="3"> ดุดูุจู</label>
                        <label><input type="checkbox" name="schedule-day" value="4"> ตุดูุจู</label>
                        <label><input type="checkbox" name="schedule-day" value="5"> ุฌูุนู</label>
                    </div>
                    <div style="display: flex; gap: 20px; justify-content: center; align-items: center;">
                        <label>
                            ุดุฑูุน:
                            <input type="time" id="settings-schedule-start">
                        </label>
                        <label>
                            ูพุงุงู:
                            <input type="time" id="settings-schedule-end">
                        </label>
                    </div>
                </div>
            </li>
        </ul>

        <h3 class="section-title">ูุณุช ูุนู ุฏุงูุดโุขููุฒุงู</h3>
        <ul id="settings-student-list" class="list-container"></ul>
    </main>

    <main id="session-page" class="page">
        <div class="session-actions">
            <button id="new-session-btn" class="btn-success btn-large">
                โ ุฌูุณู ุฌุฏุฏ
            </button>
        </div>
        <h4>ุฌูุณุงุช ูุจู:</h4>
        <ul id="session-list" class="list-container"></ul>
    </main>

    <main id="column-mapping-page" class="page">
        <h2>ุงูุชุฎุงุจ ุณุชูู ูุงู ุฏุงูุดโุขููุฒุงู</h2>
        <p>ูุงู ุดูุง ุจุง ููููุช ุฎูุงูุฏู ุดุฏ. ูุทูุงู ุงุฒ ูุณุช ุฒุฑุ ุณุชูู ฺฉู ุญุงู ูุงู ฺฉุงูู ุฏุงูุดโุขููุฒุงู ุงุณุช ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ.</p>

        <div class="input-group">
            <select id="column-select-dropdown" style="width: 100%; padding: 10px;"></select>
        </div>

        <div class="form-actions">
            <button id="confirm-column-btn" class="btn-success">ุงุฏุงูู ู ููุงุด ูพุดโููุงุด</button>
            <button id="cancel-import-btn" class="btn-secondary" style="width: auto;">ูุบู ุนููุงุช</button>
        </div>
    </main>

    <main id="csv-preview-page" class="page">
        <h2>ูพุดโููุงุด ูุณุช ูุฑูุฏ</h2>
        <p>ูุทูุงู ูุณุช ุฒุฑ ุฑุง ุจุฑุฑุณ ฺฉุฑุฏู ู ููุงุฑุฏ ููุฑุฏ ูุธุฑ ุจุฑุง ุงูุฒูุฏู ุฑุง ุชุงุฏ ฺฉูุฏ.</p>
        <ul id="csv-preview-list" class="list-container"></ul>
        <div class="form-actions">
            <button id="csv-confirm-btn" class="btn-success">ุชุงุฏ ู ุงูุฒูุฏู ููุงุฑุฏ ุงูุชุฎุงุจ ุดุฏู</button>
            <button id="csv-cancel-btn">ูุบู ุนููุงุช</button>
        </div>
    </main>

    <main id="student-profile-page" class="page">
        <h2 id="profile-student-name-header"></h2>
        <button id="back-to-student-page-btn" class="btn-secondary" style="width: auto;">โก๏ธ ุฏุงุดุจุฑุฏ ุฌูุณู</button>
        <hr class="separator">

        <div class="profile-content-container">

            <div class="history-section">
                <div class="history-section-header">
                    <h3>ุณูุงุจู ุฏุงูุดโุขููุฒ</h3>
                    <button id="add-note-btn" class="btn-icon" title="ุงูุฒูุฏู ุงุฏุฏุงุดุช ุฌุฏุฏ">๐</button>
                </div>
                <div id="profile-stats-summary" class="stats-summary-box">
                    <!-- Student's general stats will be displayed here -->
                </div>

            </div>

        </div>
    </main>

    <main id="trash-page" class="page">
        <h2>๐๏ธ ุณุทู ุฒุจุงูู</h2>
        <p style="font-size: 14px; color: #666; text-align: center;">ุงู ูุณุช ุญุฏุงฺฉุซุฑ ตฐ ุขุชู ุงุฎุฑ ุฑุง ููุงุด ูโุฏูุฏ.</p>
        <hr class="separator">
        <ul id="trashed-items-list" class="list-container">
        </ul>
    </main>

    <main id="restore-points-page" class="page">
        <h2>ููุงุท ุจุงุฒฺฏุดุช</h2>
        <p style="font-size: 14px; color: #666; text-align: center; margin-bottom: 20px;">
            ณ ูุงู ูพุดุชุจุงู ุงุฎุฑ ุดูุง ฺฉู ุจูโุตูุฑุช ุฎูุฏฺฉุงุฑ ุฐุฎุฑู ุดุฏูโุงูุฏ.
        </p>
        <ul id="restore-points-list" class="list-container">
        </ul>
    </main>

    <main id="session-dashboard-page" class="page">

        <div class="dashboard-tabs">
            <button id="selector-tab-btn" class="tab-btn active">ุงูุชุฎุงุจฺฏุฑ</button>
            <button id="attendance-tab-btn" class="tab-btn">ุญุถูุฑ ู ุบุงุจ</button>
        </div>

        <div id="selector-pane" class="tab-pane active">

            <div class="dashboard-container">
                <div class="action-column">
                    <div class="action-column-header">
                        <h3>๐ฒ ุงูุชุฎุงุจฺฏุฑ ููุดููุฏ</h3>
                        <div class="student-search-container animated-search-container">
                            <input type="text" id="student-search-input" class="animated-search-input"
                                placeholder="ุฌุณุชุฌู ุฏุฑ ุงู ฺฉูุงุณ">
                            <span class="search-icon">๐</span>
                            <div id="student-search-results" class="search-results-dropdown"></div>
                        </div>
                    </div>

                    <div id="category-selection-container" class="category-pills">
                    </div>

                    <div id="quick-grade-form-wrapper">
                        <input type="number" id="quick-score-input" placeholder="ููุฑู">
                        <textarea id="quick-note-textarea" placeholder="ุงุฏุฏุงุดุช (ุงุฎุชุงุฑ)..."></textarea>
                        <button id="quick-grade-submit-btn">ุซุจุช</button>
                    </div>

                    <div id="select-student-btn-wrapper">
                        <button id="select-student-btn" class="btn-success btn-large">ููุฑ ุจุนุฏ</button>
                    </div>

                    <div id="selected-student-result" class="result-display">
                    </div>
                </div>

                <div class="info-column">
                    <h3 id="student-stats-header" class="section-title">ุขูุงุฑ ุนููฺฉุฑุฏ</h3>
                    <div id="student-stats-table-container">

                    </div>

                </div>
            </div>
        </div>

        <div id="attendance-pane" class="tab-pane">

            <ul id="attendance-list" class="list-container">
            </ul>
            <div id="attendance-mass-actions-container">
                <button id="mass-comment-btn" class="btn-secondary" disabled>๐ ุซุจุช
                    ุงุฏุฏุงุดุช ฺฏุฑูู</button>
            </div>
            <div class="form-actions">
                <button id="finish-attendance-btn" class="btn-success btn-large">ุชุงุฏ ู ุงุฏุงูู</button>
            </div>
            <div id="absentees-summary-container"></div>
        </div>

    </main>

    <div id="undo-toast" class="toast-base undo-toast">
        <span id="undo-message"></span>
        <button id="undo-btn">ูุงฺฏุฑุฏ</button>
    </div>

    <div id="custom-confirm-modal" class="modal-overlay">
        <div class="modal-content">
            <p id="confirm-modal-message"></p>
            <div class="modal-actions">
                <button id="confirm-modal-cancel-btn" class="btn-secondary">ูุบู</button>
                <button id="confirm-modal-confirm-btn">ุชุงุฏ</button>
            </div>
        </div>
    </div>

    <div id="add-note-modal" class="modal-overlay">
        <div class="modal-content">
            <h3 id="add-note-modal-title">ุซุจุช ุงุฏุฏุงุดุช ุฌุฏุฏ</h3>
            <textarea id="new-note-content" placeholder="ูุชู ุงุฏุฏุงุดุช ุฎูุฏ ุฑุง ุงูุฌุง ูุงุฑุฏ ฺฉูุฏ"></textarea>
            <div class="modal-actions">
                <button id="cancel-note-btn" class="btn-secondary">ูุบู</button>
                <button id="class-save-note-btn" class="btn-success">ุฐุฎุฑู</button>
            </div>
        </div>
    </div>

    <div id="date-picker-modal" class="modal-overlay">
        <div class="modal-content">
            <h3 id="date-picker-title">ุชุบุฑ ุชุงุฑุฎ ุฌูุณู</h3>
            <p style="font-size:14px; color:#666; margin-bottom:15px;">
                ุชุงุฑุฎ ุฌุฏุฏ ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ. ุฒูุงู (ุณุงุนุช) ุฌูุณู ุชุบุฑ ูุฎูุงูุฏ ฺฉุฑุฏ.
            </p>
            <div class="input-group centered-input-group" style="flex-direction: row-reverse; gap: 5px;">
                <select id="dp-day" class="date-select"></select>
                <select id="dp-month" class="date-select"></select>
                <select id="dp-year" class="date-select"></select>
            </div>
            <div class="modal-actions">
                <button id="date-picker-cancel-btn" class="btn-secondary">ูุบู</button>
                <button id="date-picker-confirm-btn" class="btn-success">ุชุงุฏ</button>
            </div>
        </div>
    </div>

    <div id="mass-comment-modal" class="modal-overlay">
        <div class="modal-content">
            <h3 id="mass-comment-modal-title">ุซุจุช ุงุฏุฏุงุดุช ฺฏุฑูู ุชฺฉูู</h3>
            <p id="mass-comment-student-count-message"></p>
            <textarea id="mass-comment-content" placeholder="ูุชู ุงุฏุฏุงุดุช ฺฏุฑูู ุฎูุฏ ุฑุง ุงูุฌุง ูุงุฑุฏ ฺฉูุฏ"></textarea>
            <div id="append-checkbox-label" class="modal-options">
                <input type="checkbox" id="mass-comment-append-checkbox">
                <label for="mass-comment-append-checkbox">ุจู ุงุฏุฏุงุดุชโูุง ูุจู ุงุถุงูู ุดูุฏ
                </label>
            </div>
            <div class="modal-actions">
                <button id="mass-comment-cancel-btn" class="btn-secondary">ูุบู</button>
                <button id="mass-comment-save-btn" class="btn-success">ุฐุฎุฑู</button>
            </div>
        </div>
    </div>

    <div id="secure-confirm-modal" class="modal-overlay">
        <div class="modal-content">
            <p id="secure-confirm-message"></p>
            <p>ุจุฑุง ุชุงุฏุ ูุทูุงู ุนุฏุฏ ุฒุฑ ุฑุง ุฏุฑ ฺฉุงุฏุฑ ูุงุฑุฏ ฺฉูุฏ:</p>
            <div id="secure-confirm-code" class="secure-code-display"></div>
            <input type="text" id="secure-confirm-input" placeholder="ุนุฏุฏ ต ุฑูู..." maxlength="5" autocomplete="off">
            <div class="modal-actions">
                <button id="secure-confirm-cancel-btn" class="btn-secondary">ูุบู</button>
                <button id="secure-confirm-confirm-btn" class="btn-warning" disabled>ุชุงุฏ ุญุฐู</button>
            </div>
        </div>
    </div>

    <div id="move-student-modal" class="modal-overlay">
        <div class="modal-content">
            <h3 id="move-student-modal-title">ุงูุชูุงู ุฏุงูุดโุขููุฒ</h3>
            <p>ูุทูุงู ฺฉูุงุณ ููุตุฏ ุฑุง ุจุฑุง ุงูุชูุงู ุฏุงูุดโุขููุฒ ุงูุชุฎุงุจ ฺฉูุฏ:</p>
            <div id="input-group-for-student-move" class="input-group">
                <select id="move-student-class-select"></select>
            </div>
            <div class="modal-actions">
                <button id="move-student-cancel-btn" class="btn-secondary">ูุบู</button>
                <button id="move-student-confirm-btn" class="btn-success">ุงูุชูุงู</button>
            </div>
        </div>
    </div>

    <div id="restore-confirm-modal" class="modal-overlay">
        <div class="modal-content">
            <h3 id="restore-modal-title">ุจุงุฒุงุจ ุงุทูุงุนุงุช</h3>
            <p id="restore-modal-message"></p>
            <p id="restore-modal-warning" style="display: none; color: var(--color-strong-warning); font-weight: bold;">
            </p>
            <div class="modal-options" style="margin: 20px 0; justify-content: center;">
                <input type="checkbox" id="restore-append-checkbox" checked>
                <label for="restore-append-checkbox">ุงูุฒูุฏู ฺฉูุงุณโูุง ุจู ูุณุช ูุนู</label>
            </div>
            <div class="modal-actions">
                <button id="restore-confirm-cancel-btn" class="btn-secondary">ูุบู</button>
                <button id="restore-confirm-confirm-btn" class="btn-warning">ุจุงุฒุงุจ</button>
            </div>
        </div>
    </div>

    <div id="log-modal" class="modal-overlay">
        <div class="modal-content">
            <h3 id="log-modal-title">ฺฏุฒุงุฑุด ูุนุงูุชโูุง</h3>
            <ul id="log-list" class="list-container">
            </ul>
            <div class="modal-actions">
                <button id="log-modal-close-btn" class="btn-secondary">ุจุณุชู</button>
            </div>
        </div>
    </div>

    <div id="student-profile-modal" class="modal-overlay">
        <div class="modal-content profile-modal-content">
            <div class="profile-modal-header">
                <h2 id="modal-profile-student-name"></h2>
                <button id="modal-profile-close-btn" class="close-btn">&times;</button>
            </div>
            <div id="modal-profile-content-container" class="profile-content-container">
            </div>
        </div>
    </div>

    <div id="category-modal" class="modal-overlay">
        <div class="modal-content">
            <h3 id="category-modal-title">ุงุฌุงุฏ ุฏุณุชูโุจูุฏ ุฌุฏุฏ</h3>
            <input type="text" id="new-category-modal-name" placeholder="ูุงู ุฏุณุชูโุจูุฏ (ูุซูุง: Grammar)">
            <div class="modal-options">
                <input type="checkbox" id="new-category-modal-is-graded">
                <label for="new-category-modal-is-graded">ููุฑูโุฏุงุฑ</label>
            </div>
            <div class="modal-actions">
                <button id="category-modal-cancel-btn" class="btn-secondary">ูุบู</button>
                <button id="category-modal-save-btn" class="btn-success">ุฐุฎุฑู</button>
            </div>
        </div>
    </div>

    <div id="custom-context-menu" class="context-menu">
        <ul></ul>
    </div>

    <div id="notification-toast" class="toast-base notification-toast"></div>

    <div id="screen-saver-overlay" class="screen-saver">
        <div class="screen-saver-content">
            <div id="screen-saver-text" class="screen-saver-text">๐</div>
            <div id="screen-saver-app-name" class="screen-saver-app-name">ุฏุณุชุงุฑ ููุดููุฏ ูุนูู</div>
            <div id="screen-saver-version" class="screen-saver-version"></div>
        </div>
    </div>

    <div id="report-config-modal" class="modal-overlay">
        <div class="modal-content">
            <h3 id="report-modal-title">ุชูุธูุงุช ฺฏุฒุงุฑุด</h3>
            <p style="margin-bottom: 15px; font-size: 14px; color: #666;">
                ูุทูุงู ุณุชููโูุง ููุฑุฏ ูุธุฑ ุจุฑุง ฺุงูพ ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ:
            </p>

            <div id="report-columns-container" class="report-columns-grid">
            </div>

            <div class="modal-actions" style="margin-top: 20px;">
                <button id="report-cancel-btn" class="btn-secondary">ูุบู</button>
                <button id="report-print-btn" class="btn-success">ฺุงูพ ฺฏุฒุงุฑุด</button>
            </div>
        </div>
    </div>

    <script type="module" src="/src/main.js"></script>
</body>

</html>